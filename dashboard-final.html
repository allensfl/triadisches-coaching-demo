<!DOCTYPE html>
<html lang="de">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Coach Dashboard - Triadisches KI-Coaching</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            padding: 20px;
        }

        .dashboard-container {
            max-width: 1400px;
            margin: 0 auto;
            background: white;
            border-radius: 16px;
            box-shadow: 0 20px 40px rgba(0,0,0,0.1);
            overflow: hidden;
        }

        .header {
            background: linear-gradient(135deg, #2c3e50 0%, #34495e 100%);
            color: white;
            padding: 30px;
            text-align: center;
            position: relative;
        }

        .header h1 {
            font-size: 2.5rem;
            margin-bottom: 10px;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 15px;
        }

        .header h1::before {
            content: "🎯";
            font-size: 2rem;
        }

        .header p {
            font-size: 1.2rem;
            opacity: 0.9;
            margin-bottom: 25px;
        }

        .header-actions {
            display: flex;
            gap: 15px;
            justify-content: center;
            flex-wrap: wrap;
        }

        .header-btn {
            background: rgba(255,255,255,0.2);
            color: white;
            border: none;
            padding: 12px 24px;
            border-radius: 8px;
            cursor: pointer;
            font-size: 1rem;
            transition: all 0.3s ease;
            backdrop-filter: blur(10px);
            min-height: 48px;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .header-btn:hover {
            background: rgba(255,255,255,0.3);
            transform: translateY(-2px);
        }

        .steps-navigation {
            padding: 30px;
            background: #f8f9fa;
            border-bottom: 1px solid #e9ecef;
        }

        .steps-grid {
            display: grid;
            grid-template-columns: repeat(4, 1fr);
            gap: 15px;
            max-width: 1200px;
            margin: 0 auto;
        }

        .step-btn {
            background: white;
            border: 2px solid #e9ecef;
            border-radius: 12px;
            padding: 20px 15px;
            cursor: pointer;
            transition: all 0.3s ease;
            text-align: center;
            min-height: 120px;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            position: relative;
        }

        .step-btn:hover {
            border-color: #007bff;
            transform: translateY(-3px);
            box-shadow: 0 8px 25px rgba(0,123,255,0.15);
        }

        .step-btn.active {
            background: linear-gradient(135deg, #007bff 0%, #0056b3 100%);
            color: white;
            border-color: #007bff;
            box-shadow: 0 8px 25px rgba(0,123,255,0.3);
        }

        .step-btn.completed {
            background: linear-gradient(135deg, #28a745 0%, #20c997 100%);
            color: white;
            border-color: #28a745;
        }

        .step-number {
            font-size: 1.5rem;
            font-weight: bold;
            margin-bottom: 8px;
        }

        .step-title {
            font-size: 0.9rem;
            font-weight: 600;
            line-height: 1.3;
        }

        .main-content {
            display: grid;
            grid-template-columns: 1fr 1fr 1fr;
            gap: 0;
            min-height: 600px;
        }

        .panel {
            padding: 30px;
            border-right: 1px solid #e9ecef;
        }

        .panel:last-child {
            border-right: none;
        }

        .panel h3 {
            margin-bottom: 20px;
            font-size: 1.3rem;
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .coachee-dialog {
            background: #f8f9fa;
        }

        .ki-assistant {
            background: white;
        }

        .coach-notes {
            background: #f1f3f4;
        }

        .chat-messages {
            background: white;
            border: 1px solid #e9ecef;
            border-radius: 12px;
            padding: 20px;
            height: 300px;
            overflow-y: auto;
            margin-bottom: 15px;
        }

        .message {
            background: #e3f2fd;
            padding: 12px 16px;
            border-radius: 18px;
            margin-bottom: 12px;
            position: relative;
        }

        .message.coachee {
            background: #e8f5e8;
            margin-left: 20px;
        }

        .message-time {
            font-size: 0.8rem;
            color: #666;
            margin-top: 5px;
        }

        .chat-input {
            display: flex;
            gap: 10px;
            align-items: center;
        }

        .chat-input input {
            flex: 1;
            padding: 12px 16px;
            border: 1px solid #ddd;
            border-radius: 25px;
            font-size: 1rem;
            outline: none;
        }

        .chat-input input:focus {
            border-color: #007bff;
            box-shadow: 0 0 0 3px rgba(0,123,255,0.1);
        }

        .send-btn {
            background: #007bff;
            color: white;
            border: none;
            padding: 12px 20px;
            border-radius: 25px;
            cursor: pointer;
            font-size: 0.9rem;
            transition: all 0.3s ease;
        }

        .send-btn:hover {
            background: #0056b3;
            transform: scale(1.05);
        }

        .step-content {
            background: white;
            border: 1px solid #e9ecef;
            border-radius: 12px;
            padding: 25px;
            margin-bottom: 20px;
        }

        .coach-instructions {
            background: linear-gradient(135deg, #e3f2fd 0%, #bbdefb 100%);
            border-left: 4px solid #2196f3;
            padding: 20px;
            border-radius: 8px;
            margin-bottom: 20px;
            font-style: italic;
        }

        .coach-instructions h4 {
            color: #1976d2;
            margin-bottom: 10px;
            font-style: normal;
        }

        .ki-prompt {
            background: linear-gradient(135deg, #ffebee 0%, #ffcdd2 100%);
            border-left: 4px solid #f44336;
            padding: 20px;
            border-radius: 8px;
            margin-bottom: 20px;
        }

        .ki-prompt h4 {
            color: #c62828;
            margin-bottom: 10px;
        }

        .prompt-text {
            background: white;
            padding: 15px;
            border-radius: 8px;
            border: 1px solid #ddd;
            font-family: 'Courier New', monospace;
            font-size: 0.95rem;
            line-height: 1.5;
            margin-bottom: 15px;
        }

        .tools-section {
            background: linear-gradient(135deg, #f3e5f5 0%, #e1bee7 100%);
            border-left: 4px solid #9c27b0;
            padding: 20px;
            border-radius: 8px;
            margin-bottom: 20px;
        }

        .tools-section h4 {
            color: #7b1fa2;
            margin-bottom: 15px;
        }

        .tool-buttons {
            display: flex;
            gap: 10px;
            flex-wrap: wrap;
        }

        .tool-btn {
            background: white;
            border: 2px solid #9c27b0;
            color: #7b1fa2;
            padding: 10px 16px;
            border-radius: 25px;
            cursor: pointer;
            font-size: 0.9rem;
            transition: all 0.3s ease;
            text-decoration: none;
            display: inline-flex;
            align-items: center;
            gap: 8px;
        }

        .tool-btn:hover {
            background: #9c27b0;
            color: white;
            transform: translateY(-2px);
            box-shadow: 0 4px 12px rgba(156,39,176,0.3);
        }

        .action-buttons {
            display: flex;
            gap: 10px;
            flex-wrap: wrap;
            margin-top: 15px;
        }

        .btn {
            padding: 12px 20px;
            border: none;
            border-radius: 8px;
            cursor: pointer;
            font-size: 0.95rem;
            transition: all 0.3s ease;
            text-decoration: none;
            display: inline-flex;
            align-items: center;
            gap: 8px;
            min-height: 48px;
        }

        .btn-primary {
            background: #007bff;
            color: white;
        }

        .btn-primary:hover {
            background: #0056b3;
            transform: translateY(-2px);
            box-shadow: 0 4px 12px rgba(0,123,255,0.3);
        }

        .btn-secondary {
            background: #6c757d;
            color: white;
        }

        .btn-secondary:hover {
            background: #545b62;
            transform: translateY(-2px);
        }

        .notes-area {
            width: 100%;
            min-height: 300px;
            padding: 20px;
            border: 1px solid #ddd;
            border-radius: 12px;
            font-size: 1rem;
            font-family: inherit;
            resize: vertical;
            outline: none;
        }

        .notes-area:focus {
            border-color: #007bff;
            box-shadow: 0 0 0 3px rgba(0,123,255,0.1);
        }

        .ki-input {
            width: 100%;
            min-height: 150px;
            padding: 15px;
            border: 1px solid #ddd;
            border-radius: 12px;
            font-size: 1rem;
            font-family: inherit;
            resize: vertical;
            outline: none;
            margin-bottom: 15px;
        }

        .ki-input:focus {
            border-color: #007bff;
            box-shadow: 0 0 0 3px rgba(0,123,255,0.1);
        }

        .suggestions {
            margin-top: 15px;
        }

        .suggestion {
            background: #f8f9fa;
            border: 1px solid #e9ecef;
            padding: 10px 15px;
            border-radius: 8px;
            margin-bottom: 8px;
            cursor: pointer;
            transition: all 0.3s ease;
            font-size: 0.9rem;
        }

        .suggestion:hover {
            background: #e9ecef;
            border-color: #007bff;
        }

        .repository-modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0,0,0,0.5);
            z-index: 1000;
            backdrop-filter: blur(5px);
        }

        .repository-content {
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            background: white;
            border-radius: 16px;
            padding: 30px;
            max-width: 800px;
            max-height: 80vh;
            overflow-y: auto;
            box-shadow: 0 20px 40px rgba(0,0,0,0.3);
        }

        .close-modal {
            position: absolute;
            top: 15px;
            right: 20px;
            background: none;
            border: none;
            font-size: 1.5rem;
            cursor: pointer;
            color: #666;
        }

        .prompt-category {
            margin-bottom: 25px;
        }

        .prompt-category h4 {
            color: #2c3e50;
            margin-bottom: 10px;
            padding-bottom: 5px;
            border-bottom: 2px solid #e9ecef;
        }

        .prompt-item {
            background: #f8f9fa;
            padding: 15px;
            border-radius: 8px;
            margin-bottom: 10px;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .prompt-item:hover {
            background: #e9ecef;
            transform: translateY(-1px);
        }

        .prompt-item h5 {
            color: #495057;
            margin-bottom: 5px;
        }

        .prompt-item p {
            color: #6c757d;
            font-size: 0.9rem;
            margin: 0;
        }

        @media (max-width: 768px) {
            .steps-grid {
                grid-template-columns: repeat(2, 1fr);
                gap: 10px;
            }
            
            .main-content {
                grid-template-columns: 1fr;
                gap: 0;
            }
            
            .panel {
                border-right: none;
                border-bottom: 1px solid #e9ecef;
            }
            
            .panel:last-child {
                border-bottom: none;
            }
            
            .header-actions {
                flex-direction: column;
                align-items: center;
            }
            
            .header-btn {
                width: 100%;
                max-width: 300px;
            }
            
            .step-btn {
                min-height: 100px;
                padding: 15px 10px;
            }
            
            .step-title {
                font-size: 0.8rem;
            }
        }

        .feedback-animation {
            animation: pulse 0.6s ease-in-out;
        }

        @keyframes pulse {
            0% { transform: scale(1); }
            50% { transform: scale(1.05); }
            100% { transform: scale(1); }
        }
    </style>
</head>
<body>
    <div class="dashboard-container">
        <header class="header">
            <h1>Coach-Dashboard</h1>
            <p>Triadisches KI-Coaching - 12 Schritte zum Erfolg</p>
            
            <div class="header-actions">
                <button class="header-btn" onclick="copyCoacheeLink()">
                    📋 Coachee-Link senden
                </button>
                <button class="header-btn" onclick="openRepository()">
                    📚 Prompt-Repository
                </button>
            </div>
        </header>

        <div class="steps-navigation">
            <div class="steps-grid" id="stepsGrid">
                <!-- Steps werden dynamisch geladen -->
            </div>
        </div>

        <div class="main-content">
            <div class="panel coachee-dialog">
                <h3>💬 Coachee Dialog</h3>
                <div class="chat-messages" id="coacheeMessages">
                    <div class="message">
                        <div>Hallo! Ich bin bereit für das Coaching. Wo fangen wir an?</div>
                        <div class="message-time">14:30</div>
                    </div>
                </div>
                <div class="chat-input">
                    <input type="text" placeholder="Was sagt der Coachee?" id="coacheeInput">
                    <button class="send-btn" onclick="addCoacheeMessage()">💬 Add</button>
                </div>
            </div>

            <div class="panel ki-assistant">
                <h3>🤖 KI-Assistent</h3>
                <div class="step-content" id="stepContent">
                    <!-- Aktueller Schritt wird hier angezeigt -->
                </div>
                
                <textarea class="ki-input" id="kiInput" placeholder="KI-Input wird automatisch eingefügt..."></textarea>
                
                <div class="action-buttons">
                    <button class="btn btn-primary" onclick="sendToAI()">
                        🚀 An KI senden
                    </button>
                    <button class="btn btn-secondary" onclick="clearKIInput()">
                        🗑️ Leeren
                    </button>
                </div>

                <div class="suggestions" id="aiSuggestions">
                    <!-- AI Suggestions werden hier angezeigt -->
                </div>
            </div>

            <div class="panel coach-notes">
                <h3>📝 Coach-Notizen</h3>
                <textarea class="notes-area" placeholder="Notizen zum aktuellen Schritt...

• Beobachtungen zum Coachee
• Wichtige Erkenntnisse  
• Nächste Schritte
• Besondere Herausforderungen"></textarea>
            </div>
        </div>
    </div>

    <!-- Repository Modal -->
    <div class="repository-modal" id="repositoryModal">
        <div class="repository-content">
            <button class="close-modal" onclick="closeRepository()">×</button>
            <h2>📚 Prompt-Repository - 82+ Prompts</h2>
            
            <div class="prompt-category">
                <h4>GT1-GT12: Geißlers Triadische 12-Schritte</h4>
                <div class="prompt-item" onclick="usePrompt('GT1')">
                    <h5>GT1: Einleitung & Problembeschreibung</h5>
                    <p>Ich habe folgendes Anliegen: [PROBLEMBESCHREIBUNG]. Kannst du mir helfen, das strukturiert zu durchdenken?</p>
                </div>
                <div class="prompt-item" onclick="usePrompt('GT2')">
                    <h5>GT2: Erweiterte Beschreibung</h5>
                    <p>Erstelle einen in Ich-Form geschriebenen Bericht mit Ist/Soll-Situation und Rahmenbedingungen...</p>
                </div>
                <!-- Weitere GT-Prompts... -->
            </div>

            <div class="prompt-category">
                <h4>SF1-SF12: Solution Finder Standard</h4>
                <div class="prompt-item" onclick="usePrompt('SF1')">
                    <h5>SF1: Problemanalyse</h5>
                    <p>Hilf mir dabei, mein Problem systematisch zu analysieren und Lösungsansätze zu entwickeln...</p>
                </div>
                <!-- Weitere SF-Prompts... -->
            </div>

            <div class="prompt-category">
                <h4>DIAG1-15: Diagnostische Prompts</h4>
                <div class="prompt-item" onclick="usePrompt('DIAG1')">
                    <h5>DIAG1: Situationsanalyse</h5>
                    <p>Analysiere meine Situation und identifiziere die Kernprobleme...</p>
                </div>
                <!-- Weitere DIAG-Prompts... -->
            </div>

            <div class="prompt-category">
                <h4>LÖS1-15: Lösungsorientierte Prompts</h4>
                <div class="prompt-item" onclick="usePrompt('LÖS1')">
                    <h5>LÖS1: Zielklärung</h5>
                    <p>Hilf mir dabei, meine Ziele klar zu definieren und einen Umsetzungsplan zu entwickeln...</p>
                </div>
                <!-- Weitere LÖS-Prompts... -->
            </div>

            <div class="prompt-category">
                <h4>Spezial-Kategorien</h4>
                <div class="prompt-item" onclick="usePrompt('WARN1')">
                    <h5>WARN: Notfall & Grenzen</h5>
                    <p>Spezielle Prompts für kritische Situationen und Grenzbereiche...</p>
                </div>
                <div class="prompt-item" onclick="usePrompt('PAAR1')">
                    <h5>PAAR: Gruppen & Paare</h5>
                    <p>Prompts für Paar- und Gruppencoaching-Situationen...</p>
                </div>
                <div class="prompt-item" onclick="usePrompt('LIVE1')">
                    <h5>LIVE: Live & Digital</h5>
                    <p>Spezielle Prompts für Online- und Live-Coaching...</p>
                </div>
            </div>
        </div>
    </div>

    <script>
        // 12 Schritte des triadischen Coachings
        const steps = [
            {
                id: 1,
                title: "Einleitung & Problem",
                description: "Erste Problem-/Zielbeschreibung",
                instructions: "Coach begrüßt Coachingpartner, macht etwas Small Talk und teilt dann den Bildschirm, um Coachee das Konzept und Verfahren des KI-Coachings vorzustellen. Coach achtet dabei insbesondere auf den Aufbau einer positiven Arbeitsbeziehung.",
                prompt: "Ich habe folgendes Anliegen: [PROBLEMBESCHREIBUNG]. Kannst du mir helfen, das strukturiert zu durchdenken und erste Lösungsansätze zu entwickeln?"
            },
            {
                id: 2,
                title: "Erweiterte Beschreibung", 
                description: "Strukturierter Ich-Bericht",
                instructions: "Coach regt Coachee an zu erzählen, wie die aktuell unbefriedigende IST-Situation ist und wie er/sie sich die SOLL-Situation vorstellt. Coach beschränkt sich dabei auf aktives Zuhören.",
                prompt: "Hier noch zusätzliche Informationen zu meinem Anliegen: [ERGÄNZENDE DETAILS]. Erstelle einen in Ich-Form geschriebenen Bericht, in dem alle bisher vorliegenden Informationen zusammengefasst sind. Unterteile in Ist- und Soll-Situation und gehe auf Rahmenbedingungen, innere Prozesse, Verhalten und Konsequenzen ein."
            },
            {
                id: 3,
                title: "Bildarbeit",
                description: "Immersive Zielklärung",
                instructions: "Coach lädt Coachee ein, sich das Erreichen des Ziels bildlich vorzustellen und bittet um eine detaillierte Beschreibung dieser Vorstellung.",
                prompt: "Stell dir vor, dein Ziel ist erreicht. Beschreibe mir diese Situation so detailliert wie möglich: Wo bist du? Was siehst du? Was hörst du? Wie fühlst du dich? Wer ist dabei? Was machst du konkret? Entwickle aus dieser Beschreibung eine kraftvolle Bildmetapher für dein Ziel.",
                tools: ["images"]
            },
            {
                id: 4,
                title: "Informationsprüfung",
                description: "Fehlende Informationen",
                instructions: "Coach prüft systematisch, ob alle wichtigen Informationen für das weitere Vorgehen vorliegen.",
                prompt: "Basierend auf unserer bisherigen Unterhaltung: Welche wichtigen Informationen fehlen noch, um dein Anliegen vollständig zu verstehen? Identifiziere mögliche Ausbalancierungsprobleme zwischen verschiedenen Lebensbereichen oder Werten."
            },
            {
                id: 5,
                title: "Schlüsselsituation",
                description: "Kern des Problems",
                instructions: "Coach fasst die Beschreibung der Ist- und Soll-Situation des/der Coachee schriftlich zusammen. Coach und Coachee fokussieren dabei insbesondere auf 'Schlüsselsituation' und den entsprechenden 'Schlüsselaffekt'.",
                prompt: "Identifiziere aus allem, was wir besprochen haben, die eine zentrale Schlüsselsituation, die den Kern deines Problems am besten verdeutlicht. Beschreibe diese Situation detailliert und benenne den Hauptaffekt (Gefühl), den du dabei erlebst."
            },
            {
                id: 6,
                title: "Avatar-Interview",
                description: "Tiefenpsychologisches Interview",
                instructions: "Coach erklärt das Konzept des 'Inneren Teams' und führt ein strukturiertes Interview mit verschiedenen Persönlichkeitsanteilen durch.",
                prompt: "Wir führen jetzt ein Interview mit deinem 'Inneren Team'. Stelle dir vor, in dir gibt es verschiedene Anteile: eine 'Teamchefin' (rational, planend), eine 'Unterstützerin' (motivierend, ermutigend) und eine 'Bremse' (vorsichtig, zweifelnd). Führe ein Gespräch zwischen diesen drei Anteilen zu deinem Anliegen. Was sagt jeder Anteil?",
                tools: ["avatars"]
            },
            {
                id: 7,
                title: "KI-Analyse",
                description: "Persönlichkeitsanteile",
                instructions: "Coach lässt die KI eine Analyse der verschiedenen Persönlichkeitsanteile durchführen und erstellt ein Ranking der relevanten Ausbalancierungsdimensionen.",
                prompt: "Analysiere basierend auf unserem Gespräch meine verschiedenen Persönlichkeitsanteile. Erstelle ein Ranking der 18 wichtigsten Ausbalancierungsdimensionen für meine Situation (z.B. Sicherheit vs. Risiko, Autonomie vs. Verbindung, etc.) und erkläre, welche Spannungsfelder bei mir besonders relevant sind."
            },
            {
                id: 8,
                title: "Lernziel",
                description: "Übergeordnetes Entwicklungsziel",
                instructions: "Coach arbeitet mit Coachee das übergeordnete Lern- und Entwicklungsziel heraus - das 'Thema hinter dem Thema'.",
                prompt: "Was ist das übergeordnete Lern- und Entwicklungsziel hinter deinem konkreten Anliegen? Das 'Thema hinter dem Thema'? Welche grundlegende Fähigkeit oder Haltung möchtest du entwickeln, die über die aktuelle Situation hinausgeht?"
            },
            {
                id: 9,
                title: "Widerstände",
                description: "Umsetzungswiderstände antizipieren",
                instructions: "Coach hilft dabei, mögliche innere und äußere Widerstände gegen die Umsetzung zu identifizieren und zu verstehen.",
                prompt: "Stelle dir vor, du versuchst dein Ziel umzusetzen, aber es gibt Widerstände. Führe ein inneres Gespräch mit dem Teil von dir, der Widerstand leistet. Was sind seine Befürchtungen? Was will er schützen? Welche berechtigten Einwände hat er?",
                tools: ["avatars"]
            },
            {
                id: 10,
                title: "KI-Widerstandsanalyse",
                description: "Glaubenssätze identifizieren",
                instructions: "Coach lässt die KI eine systematische Analyse der Umsetzungswiderstände durchführen.",
                prompt: "Analysiere die Widerstände, die wir identifiziert haben. Welche zugrundeliegenden Glaubenssätze, Ängste oder Schutzstrategien erkennst du? Entwickle für jeden Widerstand einen konstruktiven Umgang und alternative Glaubenssätze."
            },
            {
                id: 11,
                title: "Erfolgsimagination",
                description: "Mentale Vorwegnahme",
                instructions: "Coach führt eine ausführliche Erfolgsimagination durch, in der Coachee das erreichte Ziel mental vorwegnimmt.",
                prompt: "Begib dich gedanklich in die Zeit, in der du dein Ziel erreicht hast. Du blickst zurück auf den Weg dahin. Erzähle die Geschichte deines Erfolgs: Welche konkreten Schritte hast du unternommen? Welche Herausforderungen hast du gemeistert? Wie hast du dich dabei verändert? Entwickle daraus eine kraftvolle Bildmetapher für deinen Erfolg."
            },
            {
                id: 12,
                title: "Umsetzungsplan",
                description: "Transfer in den Alltag",
                instructions: "Coach entwickelt gemeinsam mit Coachee einen konkreten Umsetzungsplan für den Transfer der Erkenntnisse in den Alltag.",
                prompt: "Entwickle einen konkreten Umsetzungsplan für die nächsten 4 Wochen. Was sind deine ersten 3 Schritte? Wie wirst du deine Fortschritte messen? Welche Unterstützung brauchst du? Woran wirst du merken, dass du auf dem richtigen Weg bist? Formuliere auch einen 'Plan B' für Rückschläge."
            }
        ];

        let currentStep = 1;
        let completedSteps = [];

        // Initialisierung
        document.addEventListener('DOMContentLoaded', function() {
            console.log('Coach Dashboard loaded successfully');
            initializeApp();
        });

        function initializeApp() {
            console.log('Initializing app with steps:', steps);
            renderStepsGrid();
            showStep(1);
        }

        function renderStepsGrid() {
            const grid = document.getElementById('stepsGrid');
            grid.innerHTML = '';
            
            steps.forEach(step => {
                const stepBtn = document.createElement('button');
                stepBtn.className = 'step-btn';
                stepBtn.dataset.step = step.id;
                
                if (step.id === currentStep) {
                    stepBtn.classList.add('active');
                }
                if (completedSteps.includes(step.id)) {
                    stepBtn.classList.add('completed');
                }
                
                stepBtn.innerHTML = `
                    <div class="step-number">${step.id}</div>
                    <div class="step-title">${step.title}</div>
                `;
                
                stepBtn.onclick = () => showStep(step.id);
                grid.appendChild(stepBtn);
            });
        }

        function showStep(stepId) {
            currentStep = stepId;
            const step = steps.find(s => s.id === stepId);
            
            if (!step) return;
            
            // Update navigation
            renderStepsGrid();
            
            // Update content
            const content = document.getElementById('stepContent');
            let toolsHtml = '';
            
            if (step.tools) {
                toolsHtml = `
                    <div class="tools-section">
                        <h4>🛠️ Tools für diesen Schritt</h4>
                        <div class="tool-buttons">
                            ${step.tools.includes('images') ? '<button class="tool-btn" onclick="openImageSelector()">🖼️ Bilder</button>' : ''}
                            ${step.tools.includes('avatars') ? '<button class="tool-btn" onclick="openAvatarTool()">🎭 Avatare</button>' : ''}
                            <button class="tool-btn" onclick="openRepository()">📚 Prompts</button>
                        </div>
                    </div>
                `;
            }
            
            content.innerHTML = `
                <h4>Schritt ${step.id}: ${step.title}</h4>
                <p><strong>${step.description}</strong></p>
                
                <div class="coach-instructions">
                    <h4>👨‍💼 Coach-Anweisungen:</h4>
                    <p>${step.instructions}</p>
                </div>
                
                <div class="ki-prompt">
                    <h4>🤖 KI-Prompt:</h4>
                    <div class="prompt-text">${step.prompt}</div>
                    <div class="action-buttons">
                        <button class="btn btn-primary" onclick="copyPrompt('${step.prompt}')">
                            📋 Prompt kopieren & in KI einfügen
                        </button>
                    </div>
                </div>
                
                ${toolsHtml}
            `;
        }

        function copyPrompt(prompt) {
            const kiInput = document.getElementById('kiInput');
            kiInput.value = prompt;
            kiInput.focus();
            
            // Copy to clipboard
            navigator.clipboard.writeText(prompt).then(() => {
                showFeedback('✅ Prompt kopiert und in KI-Input eingefügt!');
            });
        }

        function sendToAI() {
            const kiInput = document.getElementById('kiInput');
            const text = kiInput.value.trim();
            
            if (!text) {
                showFeedback('❌ Bitte erst einen Prompt eingeben!');
                return;
            }
            
            // Copy to clipboard
            navigator.clipboard.writeText(text).then(() => {
                showFeedback('✅ Kopiert & ChatGPT öffnet...');
                
                // Open ChatGPT in new tab
                setTimeout(() => {
                    window.open('https://chat.openai.com/', '_blank');
                }, 500);
            });
        }

        function clearKIInput() {
            document.getElementById('kiInput').value = '';
            document.getElementById('kiInput').focus();
        }

        function addCoacheeMessage() {
            const input = document.getElementById('coacheeInput');
            const message = input.value.trim();
            
            if (!message) return;
            
            const messagesContainer = document.getElementById('coacheeMessages');
            const now = new Date();
            const timeStr = now.getHours().toString().padStart(2, '0') + ':' + 
                           now.getMinutes().toString().padStart(2, '0');
            
            const messageDiv = document.createElement('div');
            messageDiv.className = 'message coachee';
            messageDiv.innerHTML = `
                <div>${message}</div>
                <div class="message-time">${timeStr}</div>
            `;
            
            messagesContainer.appendChild(messageDiv);
            messagesContainer.scrollTop = messagesContainer.scrollHeight;
            
            input.value = '';
            
            // Generate AI suggestions
            generateAISuggestions(message);
        }

        function generateAISuggestions(coacheeMessage) {
            const suggestions = [
                "Das höre ich oft. Können Sie mir mehr dazu erzählen?",
                "Wie fühlt sich das für Sie an?",
                "Was wäre für Sie ein kleiner erster Schritt?",
                "Woran würden Sie merken, dass sich etwas verbessert hat?"
            ];
            
            const suggestionsContainer = document.getElementById('aiSuggestions');
            suggestionsContainer.innerHTML = '<h4>💡 KI-Antwortvorschläge:</h4>';
            
            suggestions.forEach(suggestion => {
                const suggestionDiv = document.createElement('div');
                suggestionDiv.className = 'suggestion';
                suggestionDiv.textContent = suggestion;
                suggestionDiv.onclick = () => {
                    document.getElementById('kiInput').value = suggestion;
                };
                suggestionsContainer.appendChild(suggestionDiv);
            });
        }

        function copyCoacheeLink() {
            const sessionId = 'p4aslhnv0';
            const link = `https://coaching-session.vercel.app/session/${sessionId}`;
            
            navigator.clipboard.writeText(link).then(() => {
                showFeedback('✅ Coachee-Link kopiert! Bitte an Coachee senden.');
            });
        }

        function openRepository() {
            document.getElementById('repositoryModal').style.display = 'block';
        }

        function closeRepository() {
            document.getElementById('repositoryModal').style.display = 'none';
        }

        function usePrompt(promptId) {
            const kiInput = document.getElementById('kiInput');
            
            // Beispiel-Prompts basierend auf ID
            const prompts = {
                'GT1': 'Ich habe folgendes Anliegen: [PROBLEMBESCHREIBUNG]. Kannst du mir helfen, das strukturiert zu durchdenken?',
                'GT2': 'Erstelle einen in Ich-Form geschriebenen Bericht, in dem alle bisher vorliegenden Informationen zusammengefasst sind...',
                'SF1': 'Hilf mir dabei, mein Problem systematisch zu analysieren und Lösungsansätze zu entwickeln...',
                'DIAG1': 'Analysiere meine Situation und identifiziere die Kernprobleme...',
                'LÖS1': 'Hilf mir dabei, meine Ziele klar zu definieren und einen Umsetzungsplan zu entwickeln...'
            };
            
            const prompt = prompts[promptId] || 'Prompt nicht gefunden';
            kiInput.value = prompt;
            closeRepository();
            showFeedback(`✅ Prompt ${promptId} eingefügt!`);
        }

        function openImageSelector() {
            showFeedback('🖼️ Bildauswahl-Tool wird geöffnet...');
            // Integration mit Bildauswahl-Tool
        }

        function openAvatarTool() {
            showFeedback('🎭 Avatar-Tool wird geöffnet...');
            window.open('https://cospaces.io/', '_blank');
        }

        function showFeedback(message) {
            // Create feedback element
            const feedback = document.createElement('div');
            feedback.style.cssText = `
                position: fixed;
                top: 20px;
                right: 20px;
                background: #28a745;
                color: white;
                padding: 15px 20px;
                border-radius: 8px;
                z-index: 2000;
                box-shadow: 0 4px 12px rgba(0,0,0,0.3);
                animation: slideIn 0.3s ease;
            `;
            feedback.textContent = message;
            document.body.appendChild(feedback);
            
            // Remove after 3 seconds
            setTimeout(() => {
                feedback.style.animation = 'slideOut 0.3s ease forwards';
                setTimeout(() => {
                    document.body.removeChild(feedback);
                }, 300);
            }, 3000);
        }

        // Close modal when clicking outside
        window.onclick = function(event) {
            const modal = document.getElementById('repositoryModal');
            if (event.target === modal) {
                closeRepository();
            }
        }

        // Add CSS animations
        const style = document.createElement('style');
        style.textContent = `
            @keyframes slideIn {
                from { transform: translateX(100%); opacity: 0; }
                to { transform: translateX(0); opacity: 1; }
            }
            @keyframes slideOut {
                to { transform: translateX(100%); opacity: 0; }
            }
        `;
        document.head.appendChild(style);
    </script>
</body>
</html>